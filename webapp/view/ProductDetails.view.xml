<mvc:View
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.uxap"
    xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
    core:require="{formatMessage: 'sap/base/strings/formatMessage'}"
	controllerName="products.app.controller.ProductDetails"
    busy="{view>/isBusyIndicator}"
    busyIndicatorDelay="0">

    <u:ObjectPageLayout 
        showFooter="{= ${EditModel>/EditMode} || ${EditModel>/CreateMode}}"
        class="sapUiNoContentPadding"
        >
        <u:headerTitle>
            <u:ObjectPageHeader 
                objectTitle="{= !${Name} ? ${i18n>CreateNewProductText} : ${Name}}" 
            >
                <u:actions>
                    <Button
                        visible="{= !(${EditModel>/EditMode} || ${EditModel>/CreateMode})}"
                        text="{i18n>UpdateText}"
                        type="Emphasized"
                        press="onUpdateProductPress"
                    />
                    <Button
                        visible="{= !(${EditModel>/EditMode} || ${EditModel>/CreateMode})}"
                        text="{i18n>DeleteText}"
                        press="onDeleteProductPress"
                    />
                </u:actions>
            </u:ObjectPageHeader>

        </u:headerTitle>
      
        <u:headerContent>
            <VBox visible="{= !(${EditModel>/EditMode} || ${EditModel>/CreateMode})}">
				<ObjectStatus title="{i18n>DescriptionText}" text="{Description}" />
				<ObjectStatus 
                    title="{i18n>PriceText}" 
                    text="{
                        parts: [
                            'i18n>PriceAndCurrencyText',
                            'Price',
                            'Currency'
                        ],
                        formatter: 'formatMessage'
                    }" 
                />
				<ObjectStatus title="{i18n>RatingText}" text="{Rating}" />
			</VBox>
            
            <ObjectStatus 
                visible="{EditModel>/DisplayMode}"
                title="{i18n>CategoryText}" 
                text="{Category/Name}"
            />
            <ObjectStatus 
                visible="{EditModel>/DisplayMode}"
                title="{i18n>CreatedAtText}" 
                text="{
                    path: 'ReleaseDate',
                    type: 'sap.ui.model.type.Date'  
                }"
            />
            <ObjectStatus 
                visible="{EditModel>/DisplayMode}"
                title="{i18n>DiscontinuedAtText}" 
                text="{
                    path: 'DiscontinuedDate',
                    type: 'sap.ui.model.type.Date',
                    formatter: '.formatter.getCorrectDiscontinuedDate'  
                }"
            />
             
        </u:headerContent>
        <u:sections>
            <u:ObjectPageSection 
                showTitle="{= !(${EditModel>/EditMode} || ${EditModel>/CreateMode})}"
                title="{i18n>GeneralInformationText}" 
                titleUppercase="false" 
                class="sapUiResponsiveContentPadding">
                <u:subSections>
                    <u:ObjectPageSubSection>
                        <form:SimpleForm 
                            visible="{EditModel>/DisplayMode}"
                            editable="false"
                            layout="ResponsiveGridLayout"
                            title="{= ${EditModel>/EditMode} ? ${i18n>EnterDataText} : ${i18n>GeneralInformationText}}"                
                            singleContainerFullSize="false">
                            <form:content>
                                <core:Title text="{i18n>ProductInformationText}" />
                                <VBox >
                                    <ObjectStatus title="{i18n>NameText}" text="{Name}" class="sapUiTinyMarginBottom"/>   
                                    <ObjectStatus title="{i18n>DescriptionText}" text="{Description}" class="sapUiTinyMarginBottom"/>  
                                    <ObjectStatus 
                                        title="{i18n>CreatedAtText}" 
                                        text="{
                                            path: 'ReleaseDate',
                                            type: 'sap.ui.model.type.Date'
                                        }"
                                        class="sapUiTinyMarginBottom"
                                    />  
                                    <ObjectStatus 
                                        title="{i18n>DiscontinuedAtText}" 
                                        text="{
                                            path: 'DiscontinuedDate',
                                            type: 'sap.ui.model.type.Date',
                                            formatter: '.formatter.getCorrectDiscontinuedDate'  
                                        }" 
                                        class="sapUiTinyMarginBottom"
                                    />  
                                </VBox>
                                
                                <core:Title text="{i18n>ProductDetailsText}" />
                                <VBox >
                                    <ObjectStatus 
                                        title="{i18n>PriceText}" 
                                        text="{
                                            parts: [
                                                'i18n>PriceAndCurrencyText',
                                                'Price',
                                                'Currency'
                                            ],
                                            formatter: 'formatMessage'
                                        }" 
                                        class="sapUiTinyMarginBottom"
                                    />   
                                    <ObjectStatus title="{i18n>RatingText}" text="{Rating}" class="sapUiTinyMarginBottom"/>                       
                                </VBox>
                                
                            </form:content>
                        </form:SimpleForm>
                        <form:SimpleForm 
                            visible="{= ${EditModel>/EditMode} || ${EditModel>/CreateMode}}"
                            editable="true"
                            id="idSimpleForm"
                            layout="ResponsiveGridLayout"
                            title="{= ${EditModel>/EditMode} ? ${i18n>EnterDataText} : ${i18n>GeneralInformationText}}"                
                            singleContainerFullSize="false"
                            validateFieldGroup="onFormValidateFieldGroup"
                            labelSpanXL="2"
                            emptySpanXL="3">
                            <form:content>
                                <core:Title text="{i18n>ProductInformationText}" />
                                
                                <Label text="{i18n>NameText}" labelFor="idNameInput" />
                                <Input
                                    required="true"
                                    liveChange="onLiveChange"
                                    id="idNameInput"    
                                    value="{
                                        path: 'Name',
                                        type: 'sap.ui.model.type.String',
                                        constraints: {
                                            minLength: 1
                                        }
                                    }" 
                                    
                                />   

                                <Label text="{i18n>DescriptionText}" labelFor="idDescriptionInput" />
                                <Input 
                                    value="{
                                        path: 'Description',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idDescriptionInput" 
                                />

                                <Label text="{i18n>PriceText}" labelFor="idPriceInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Price',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: {
                                            minimum: '1',
                                            maximum: '1000000',
                                            scale: '2'
                                        }
                                    }" 
                                    id="idPriceInput" 
                                />

                                <Label text="{i18n>RatingText}" labelFor="idRatingInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Rating',
                                        type: 'sap.ui.model.type.Integer',
                                        constraints: {
                                            minimum: 0
                                        }
                                    }" 
                    
                                    id="idRatingInput" 
                                />
                                <core:Title text="{i18n>ProductDetailsText}" />
                                <Label text="{i18n>CategoryText}" labelFor="idCategoriesSelect" />
                                <Select 
                                    required="true"
                                    change="onCategoryChange"
                                    forceSelection="false"
                                    items="{/Categories}" 
                                    id="idCategoriesSelect"
                                    selectedKey="{FormModel>/Category/ID}"
                                >
                                    <core:Item key="{ID}" text="{Name}" />
                                </Select>
                                
                            </form:content>
                        </form:SimpleForm>
                    </u:ObjectPageSubSection>
                  </u:subSections>
            </u:ObjectPageSection>

            <u:ObjectPageSection 
                showTitle="{= !(${EditModel>/EditMode} || ${EditModel>/CreateMode})}"
                title="{
                    parts: [
                        'i18n>SuppliersInfotext',
                        'i18n>SupplierText',
                        'i18n>InfoText'
                    ],
                    formatter: 'formatMessage'
                }" 
                titleUppercase="false" 
                class="sapUiResponsiveContentPadding">
                <u:subSections>
                    <u:ObjectPageSubSection>
                        <form:SimpleForm 
                            visible="{EditModel>/DisplayMode}"
                            editable="false"
                            layout="ResponsiveGridLayout"
                            title="{= ${EditModel>/EditMode} ? ${i18n>EnterDataText} : ${i18n>SupplierText}}"                
                            singleContainerFullSize="false">
                            <form:content>
                                <core:Title text="{i18n>SupplierInformationText}" />
                                <VBox >
                                    <ObjectStatus 
                                        title="{i18n>NameText}" 
                                        text="{Supplier/Name}" 
                                        class="sapUiTinyMarginBottom"
                                    />   
                                    <ObjectStatus 
                                        title="{i18n>ConcurrencyText}" 
                                        text="{Supplier/Concurrency}" 
                                        class="sapUiTinyMarginBottom"
                                    />                       
                                </VBox>
                                <core:Title text="{i18n>SupplierAddressText}" />
                                <VBox >
                                    <ObjectStatus 
                                        title="{i18n>StreetText}" 
                                        text="{Supplier/Address/Street}" 
                                        class="sapUiTinyMarginBottom"
                                    />   
                                    <ObjectStatus 
                                        title="{i18n>CityText}" 
                                        text="{Supplier/Address/City}" 
                                        class="sapUiTinyMarginBottom"
                                    />   
                                    <ObjectStatus 
                                        title="{i18n>StateText}" 
                                        text="{Supplier/Address/State}" 
                                        class="sapUiTinyMarginBottom"
                                    />   
                                    <ObjectStatus 
                                        title="{i18n>ZipCodeText}" 
                                        text="{Supplier/Address/ZipCode}" 
                                        class="sapUiTinyMarginBottom"
                                    />  
                                    <ObjectStatus 
                                        title="{i18n>CountryText}" 
                                        text="{Supplier/Address/Country}" 
                                        class="sapUiTinyMarginBottom"
                                    />                   
                                </VBox>
                                
                            </form:content>
                        </form:SimpleForm>
                        <form:SimpleForm 
                            visible="{= ${EditModel>/EditMode} || ${EditModel>/CreateMode}}"
                            editable="true"
                            id="idSupplierForm"
                            layout="ResponsiveGridLayout"
                            title="{= ${EditModel>/EditMode} ? ${i18n>EnterDataText} : ${i18n>SupplierText}}"                
                            singleContainerFullSize="false"
                            labelSpanXL="2"
                            emptySpanXL="3">
                            <form:content>
                                <core:Title text="{i18n>SupplierInformationText}" />
                               
                                <Label text="{i18n>NameText}" labelFor="idSupplierNameInput" />
                                <Select 
                                    required="true"
                                    forceSelection="false"
                                    change="onSuppliersSelectChange"
                                    items="{/Suppliers}" 
                                    id="idSupplierNameInput"
                                    selectedKey="{FormModel>/Supplier/ID}"
                                >
                                    <core:Item key="{ID}" text="{Name}" />
                                </Select>

                                <Label text="{i18n>ConcurrencyText}" labelFor="idSupplierConcurrency" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Concurrency',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idSupplierConcurrency" 
                                />
                                                    
                            
                                <core:Title text="{i18n>SupplierAddressText}" />
                            
                                <Label text="{i18n>StreetText}"  labelFor="IdSupplierStreetInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Address/Street',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="IdSupplierStreetInput" 
                                />
                                <Label text="{i18n>CityText}"  labelFor="idSupplierCityInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Address/City',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idSupplierCityInput" 
                                />
                                <Label text="{i18n>StateText}"  labelFor="idSupplierStateInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Address/State',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idSupplierStateInput" 
                                />
                                <Label text="{i18n>ZipCodeText}"  labelFor="idSupplierZipCodeInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Address/ZipCode',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idSupplierZipCodeInput" 
                                />
                                <Label text="{i18n>CountryText}"  labelFor="idSupplierCountryInput" />
                                <Input 
                                    required="true"
                                    liveChange="onLiveChange"
                                    value="{
                                        path: 'Supplier/Address/Country',
                                        type: 'sap.ui.model.type.String'
                                    }" 
                                    id="idSupplierCountryInput" 
                                />          
                            </form:content>
                        </form:SimpleForm>
                    </u:ObjectPageSubSection>
                  </u:subSections>
            </u:ObjectPageSection>
            
        </u:sections>
        
        <u:footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button 
                    text="Save" 
                    visible="{= !!${EditModel>/EditMode}}" 
                    press="onSaveProductPress" 
                    type="Emphasized"
                />
            
                <Button 
                    text="Create" 
                    visible="{= !!${EditModel>/CreateMode}}"
                    press="onCreateProductPress" 
                    type="Emphasized"
                />
                <Button text="{i18n>CancelText}" press="onCancelButtonPress"/>
                
            </OverflowToolbar>
        </u:footer>

    </u:ObjectPageLayout>
</mvc:View>